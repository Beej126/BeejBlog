---
title: Install OS X to physical via VMware
author: Beej
type: post
date: 2015-04-05T03:10:00+00:00
url: /2015/04/osx-v2p.html
blogger_bid:
  - 7726907200224433699
blogger_blog:
  - www.beejblog.com
blogger_id:
  - 338385813817431575
blogger_author:
  - g108832383968142578199
blogger_permalink:
  - /2015/04/osx-v2p.html
blogger_thumbnail:
  - http://1.bp.blogspot.com/-Zmdoo1do13c/VmyArU6hDZI/AAAAAAAAR4o/Gfk1hK6Y6fY/s640/Screen%2BShot%2B2015-12-12%2Bat%2B12.15.00%2BPM.png
dsq_thread_id:
  - 5514934114
snapEdIT:
  - 1
snapTW:
  - |
    s:240:"a:1:{i:0;a:8:{s:2:"do";s:1:"1";s:10:"SNAPformat";s:15:"%TITLE% - %URL%";s:8:"attchImg";s:1:"1";s:9:"isAutoImg";s:1:"A";s:8:"imgToUse";s:0:"";s:9:"msgFormat";s:27:"%TITLE%
    %URL%
    
    %EXCERPT%";s:9:"isAutoURL";s:1:"A";s:8:"urlToUse";s:0:"";}}";
categories:
  - Uncategorized
tags:
  - Mac

---
[![image][1]][1]

General guide for installing **physical boot** OS X from aÂ Windows VMware hosted guest instance &#8211; Including some specifics for <del>Yosemite, El Capitan</del> latest macOS, the Clover boot loader, and my specific hardware.
  
&nbsp;

This guide is admittedly dense with detailed experience (for my own reference), yet the core idea is simply this: **<u>get into an OS X **virtual machine** and from there, install OS X to your physical drive</u>** ðŸ™‚
  
&nbsp;

The one main snag to this Virtual to Physical approach was that, even when the physical installation drive was taken "offline" via Disk Management, Windows still had a readonly lock on the boot parition such that the bootloader install (Clover) would fail... and we're not going anywhere in h@ckintosh land w/o a bootloader... fortunately I finally came upon a couple smarties in the VMware forums that suggested a [rather obscure hack][2] that works ([see "MBR trick" below][3]).
  
&nbsp;

<div class="expander">
  <h4 style="display: inline">
    Motivations:
  </h4>
  
  <ul  class="expandee">
    <li>
      This approach generally assumes you've got a WinPC already and you want to leverage that same hardware to physically boot OSX at times as well. <ul>
        <li>
          Once you're in OSX, Parallels and VMware Fusion do both support running your physical Windows instance as a VM... this corresponds to VM'ing your Bootcamp partition under a real Mac... so to be clear, we use a Windows host to run an OSX VM from where we install OSX to a physical drive, then boot that OSX host and run that same original Window host installation as a VM under OSX ðŸ™‚
        </li>
      </ul>
    </li>
    
    <li>
      To put it out there up front &#8211; The convenience of ready-to-run VMware OSX images are the primary timesaver in this approach. Full disclosure, if you hadn't heard it before, H@ckintosh is already a grey area, and the bits required to patch VMware to run OSX are more shades of grey. I've included links to finding the bundle we're counting on. That VMware stuff can admittedly get fiddly and the convenience factor drops off fast when that happens... I intend to document that better next time I go through the process.
    </li>
    <li>
      Secondly &#8211; I had trouble getting my USB stick to boot with Clover on my hardware â€“ <a href="//www.tonymacx86.com/alternate-bootloaders/145840-x99-boot-issue-clover-2.html" target="_blank">which appears to be a known issue on my mobo (Gigabyte X99-UD4)</a>Â â€“ so on the way to prepping a USB for UniBeast, I figured why not see how tough it is to install directly from VM OSX to my intended physical drive vs fighting the USB. <li>
        Even if you don't have an inherent USB problem like me, I still feel strongly this approach dodges a lot hassle by skipping the whole routine of applying the latest desired OSX installer to a USB... that is not a trivial process...
      </li>
      <li>
        For what it's worth, this approach pretty much guarantees you won't run into issue just getting the vanilla OSX bits on your physical drive... you will naturally still have to slog through whatever your individual hardware compatibility effort requires to actually boot up... <span class="hl">but at least you only fight that battle once with the real boot vs once with the USB and then again with the real boot</span>
      </li>
      <li>
        now one could argue we're shifting our annoyance burden from building USB boots to fiddling with this special VMware install... and that's fair... but once you've mastered a known good VMware+OSX, you can readily archive & restore that bundle of files whenever you need... you can leave that version of OSX as it stands (say at Yosemite)... from that known working baseline, the processof getting the latest greatest OSX (El Capitan and beyond) onto your physical drive is a breezy affair of running the upgrade from the App Store...
      </li>
      <li>
        Apple does keep locking down kext security more and more so there's been a trickle of tweaks necessary on the SIP/CSR end of things going from Mavericks to Yosemite to El Capitan... those have been trivial settings to apply once identified but as is typical in this space, one must scrounge the interwebs to find those clever souls who've figured out the latest little trick... yet this is the nature of the game and would be just as necessary (doubly so) with the USB route.
      </li>
      <li>
        Extra bonus &#8211; when troubleshooting is necessary, it is way easier to noodle around on your physical drive from the full working OSX VM environment vs the constrained environment you get from USB boot into Installation / Recovery mode.
      </li>
    </li>
  </ul>
</div>

#### <a href="//www.beejblog.com/2015/09/X99Build.html" target="_blank">Hardware as of this guide</a>:

  * FYI &#8211; This is a perfectly copacetic Hackintosh build... sleep works great, dual screen digital video is perfect as well as audio and network. <li class="expander">
      Mobo: <a href="//www.gigabyte.com/products/product-page.aspx?pid=5123#ov" target="_blank">Gigabyte <b>GA-X99-UD4</b></a> &#8211; LGA 2011-v3 <ul>
        <li>
          bios: <b>F12</b>
        </li>
        <li>
          onboard ethernet: Intel I218-V (kext required)
        </li>
        <li>
          onboard audio: Realtek ALC1150 (vanilla support)
        </li>
      </ul>
    </li>
    
      * CPU: Intel i7-**5820k** &#8211; 6 core Haswell-E (vanilla via Clover flags)
    <li class="expander">
      Video: <a href="//www.asus.com/us/Graphics_Cards/STRIXGTX750TIOC2GD5/" target="_blank">Asus Strix Nvidia GeForce GTX 750Ti 2GB</a> &#8211; a nice fit indeed: <ul>
        <li>
          <b>No drivers necessary to vanilla boot into Yosemite</b> &#8211; understand there is no QE/CI out of box but a very workable low res mode for initial install and then full QE/CI via Nvidia "webdriver".
        </li>
        <li>
          <b>! fanless !</b> unless pushed hard by a game, which never happens to me ðŸ™‚
        </li>
        <li>
          <b>3 simultaneous digital</b> outputs, INCLUDING DisplayPort &#8211; I can confirm this card supports at least dual monitorsÂ under Yosemite via any combination of DP / HDMI /Â DVI (dual- link) with any of them driving 2560 x 1600 res...can now also confirm <span class="hl">4k @ 60Hz @ Chroma 4:4:4 over DisplayPort</span> on this card... currently doing active conversion from DP to HDMI for this screen (Samsung 49&#8243; TV UN49MU6500)... direct HDMI did NOT go full 60Hz as expected due to lack of HDMI v2.0 support<br /> <img src="/wp-content/uploads/2017/11/Screen-Shot-2017-11-19-at-3.08.37-PM.png" /></p> <li>
            no more horsepower than I care to pay for =>Â <a href="//www.amazon.com/Asus-STRIX-GTX750TI-OC-2GD5-ASUS-Graphics-Cards/dp/B00M9ZZ1Z8/ref=sr_1_1?ie=UTF8&qid=1428199893&sr=8-1&keywords=STRIX-GTX750TI-OC-2GD5">$160</a>Â at the time ... and was well stocked in major outlets circa April 2015
          </li></ul>
        </li>
        <li class="expander">
          Corsair H80i Cooler USB &#8211; caused OS X "re-wake" issue <span class="expandee">Corsair's "i" models sport temperature and fan speed sensors that drive monitoring software (Windows only) via USB ... if one goes looking, it's easy to see the USB drivers have been a mess for years ... even with the well known hacks applied, i only got occasionally working guages after reboots let alone the annoying wake issue ... <span class="hl">highly recommend avoiding any of these "Corsair Link" products</span>... or simply leave the USBs disconnected if you fall for the marketing like i did</span>
        </li>
      </ul>
      
      <h4>
        Obtain Software Bits:
      </h4>
      
      <p>
        Software versions only listed for reference as of this build, not crucial unless noted.
      </p>
      
      <ol>
        <li>
          <a href="//my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation/11_0?rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=//www.vmware.com/go/downloadworkstation&ei=IpYgVd-eDIu1oQTa34GoAQ&usg=AFQjCNHlVVRKRUyDpAphRQt_zzQ1V1wReA&sig2=45QdmC3nDR7wbaw9AfnsAw&bvm=bv.89947451,d.cGU">VMware Workstation</a> (v11.1)
        </li>
        <li>
          <a href="//www.google.com/webhp?sourceid=chrome-instant&#038;ion=1&#038;espv=2&#038;ie=UTF-8#q=download+yosemite+10.10.4+vmware+pre+installed+image+">Find a recent OSX VMWare image</a>Â (I started with Yosemite v10.10(.0) 14A389)
        </li>
        <li>
          latest <a href="//www.insanelymac.com/forum/topic/303311-workstation-1112-player-712-fusion-78-and-esxi-6-mac-os-x-unlocker-2/page-1">VMware unlocker</a> &#8211; crucial to enabling OS X guest functionality in VMWare
        </li>
        <li class="expander">
          <del>Yosemite</del> latest macOS via App Store download (v10.10.*2* 14C109) <ul>
            <li>
              get this download running as soon as you can get into the VM since it takes a while
            </li>
            <li>
              if curious, you can confirm which version of OSX you got from the app store via the "Startup Disk" popup that comes when you quit out of the installer.
            </li>
          </ul>
        </li>
        
        <li class="expander">
          <a href="//mackie100projects.altervista.org/download/" target="_blank">Clover Configurator</a> (v4.23.0) &#8211; essential, seals the deal on Clover <ol>
            <li>
              Later, use Clover Configurator to download and install latest Clover &#8211; <a href="//www.insanelymac.com/forum/topic/304530-clover-change-explanations/" target="_blank">Clover version history</a>
            </li>
            <li>
              while UniBeast still seems to cover more diverse hardware situations, Clover is pretty slick if your hardware is copacetic (basically starting with a UEFI capable mobo)
            </li>
            <li>
              the "EFI partitionÂ only"Â footprint is nice for vanilla segregation &#8211; it sits there intact if you want to completely wipe & reinstall OS X primary partition
            </li>
            <li>
              Couple nice bits for my hardware <ol>
                <li>
                  HaswellE kernel patch is a checkbox vs manually patching the kernel &#8211; nice!
                </li>
                <li>
                  no fuss NVRAM checkbox which effortlessly enables iMessageÂ and App Store connectivity
                </li>
              </ol>
            </li>
          </ol>
        </li>
        
        <li class="expander">
          <a href="//www.insanelymac.com/forum/topic/253395-kext-wizard-easy-to-use-kext-installer-and-more/" target="_blank">KextWizard</a> (v3.7.11) <span class="expandee">&#8211; one handy feature above other more well known kext loaders, it will target another drive which is perfect for this side-load scenario</span>
        </li>
        <li>
          <a href="//www.macvidcards.com/drivers.html" target="_blank">Nvidia's web driver</a> (my hardware)
        </li>
        <li>
          Raw kexts <ol>
            <li>
              <a href="//www.tonymacx86.com/downloads.php?do=cat&id=11">FakeSMC</a> &#8211; bare minimumÂ <a href="//en.wikipedia.org/wiki/Apple%E2%80%93Intel_architecture">DSMOS</a>Â avoidanceÂ for non apple hardware
            </li>
            <li>
              <a href="//www.tonymacx86.com/downloads.php?do=cat&id=11" target="_blank">AppleIntelE1000e</a>Â (v3.1.0) (my hardware) &#8211; for X99-UD4's onboardÂ Intel I218-VÂ ethernet
            </li>
            <li>
              <a href="//www.tonymacx86.com/attachments/mavericks-desktop-guides/76285d1386792813-gigabyte-ga-x79s-up5-mavericks-guide-voodootscsync-6core.zip">VoodooTSCSync patched for 6 core</a>Â (my hardware)Â &#8211; author site says this addresses "spin lock" issue
            </li>
            <li class="expander">
              <del><a href="//sourceforge.net/projects/genericusbxhci/" target="_blank">GenericUSBXHCI</a></del><span class="expandee">in conjunction with disabling XHCI in bios, this kext enabled night and day improvement in VM performance under **Yosemite** ... under El Capitan v10.11.2 my USB devices stopped working... removing this GenericUSB kext allowed them to work again and fortunately the previous Parallels VM performance problems didn't manifest after that... I also up'd from Parallels V10 to V11.1.1 (32312) since then which might be aiding this complex compatibility equation as well.</span>
            </li>
          </ol>
        </li>
      </ol>
      
      <h4>
        BIOS settings:
      </h4>
      
      <ol>
        <li>
          SATA controller in AHCI mode &#8211; classic requirement
        </li>
        <li class="expander">
          xHCI = manual, xHCI handoff = disabled &#8211;Â (<a href="//www.tonymacx86.com/yosemite-desktop-guides/156626-success-i7-5820k-gtx-970-ga-x99-ud4-yosemite-10-10-x-full-temp-guide-100-working.html" target="_blank">Reference</a>)Â this made a major difference on running VM's <div class="expandee">
            <p>
              <a style="margin-left: 1em; margin-right: 1em;" href="//1.bp.blogspot.com/-w2wTqLLjvbs/VcuSz0_D1rI/AAAAAAAAQOM/lp2fNLlq_YQ/s1600/Chipset_%255B18-27-15%255D.jpg"><img src="//www.BeejBlog.com/wp-content/uploads/2015/04/Chipset_5B18-27-155D.jpg" alt="" width="640" height="480" border="0" /></a>
            </p>
            
            <p>
              <a style="margin-left: 1em; margin-right: 1em;" href="//1.bp.blogspot.com/-QA4eYW9wo8g/VcuSzubjoSI/AAAAAAAAQOQ/SyH2H9Ixbvw/s1600/Peripherals_%255B18-27-04%255D.jpg"><img src="//www.BeejBlog.com/wp-content/uploads/2015/04/Peripherals_5B18-27-045D.jpg" alt="" width="640" height="480" border="0" /></a>
            </p>
          </div>
        </li>
      </ol>
      
      <h4>
        VMware Guest Configs:
      </h4>
      
      <ol>
        <li>
          add 'smc.version = 0' to the VMX file in order to resolve error: <i>vmcore/vmm/main/physMem_monitor.c:1123</i>
        </li>
        <li class="expander">
          Add physical disk to guest &#8211; In addition to the main vmware virtual drive that your guest OSX boots from <ol>
            <li>
              i found SATA interface to *never* work vs IDE or SCSI... SCSI gave some minor warning so i went with IDE / full disk / persistent
            </li>
          </ol>
        </li>
        
        <li class="expander">
          MBR trick to allow boot utilities (e.g. Clover installer) under vmware guest to write to physical disk: <ul>
            <li>
              sure am **grateful** <a href="//communities.vmware.com/message/1261793#1261793" target="_blank">these guys</a> figured out how to hack around this issue, otherwise this whole approach would be dead in the water with no way to write to the physical disk
            </li>
            <li>
              pretty surprised vmware hasn't been blasted into fixing this issue... it doesn't seem OSX specific but maybe that's why it's remained obscure
            </li>
            <li>
              In my experience on Win8.1 & Win10, simply taking the drive "offline" via DiskManagement was not enough... even though I've seen that suggested several times... maybe Win Server behaves differently?? and therefore works out for the majority of folks running VMs... or maybe OSX install does some rather uncommon boot partition writes vs other operating systems??
            </li>
          </ul>
          
          <ol>
            <li>
              ** This must be done BEFORE firing up vmware guest
            </li>
            <li>
              hide the physical disk from Windows by temporarily clearing the "MBR magic" signature in the very last 2 bytes of sector 0 (see <a href="//sourceforge.net/projects/directdisk/files/DirectDisk/" target="_blank">DirectDisk</a> tool screenshot at bottom under "MBR Trick")
            </li>
            <li>
              then refresh Disk Management (or DiskPart.exe > rescan) and the drive will show that it's now completely unknown
            </li>
            <li>
              now put the 55AA signature back so the Mac guest can see the drive &#8211; but be careful not to refresh Disk Management or DiskPart
            </li>
            <li>
              now fire up vmware guest and you're good to slam that drive all day long
            </li>
          </ol>
        </li>
      </ol>
      
      <h4>
        Lessons Learned:
      </h4>
      
      <ol>
        <li>
          For Clover boot errors like "<em>Couldn't allocate runtime area</em>" or "<em>requested memory exceeds our allocated relocation</em>" on UEFI boot X99 mobos, <a href="https://nickwoodhams.com/x99-hackintosh-osxaptiofixdrv-allocaterelocblock-error-update/">see this post</a>... in a nutshell, that smart dude has created a better combined replacement for the LowMemFix and AptioFix drivers</p>
        </li>
        <li>
          <p>
            <a href="//www.tonymacx86.com/user-builds/155346-success-insane-cultists-x99-workstation-ga-x99-ud4-i7-5820k-2x-gtx-660-10-10-1-a-3.html#post1021175">Major Parallels/Fusion VM performance fix</a>!! &#8211; the nutshell is apparently the xhci stuff has a major impact... i had mine disabled but then didn't have xhci manual mode selected <del>nor the GenericUsbXhci.kext loaded</del> (see El Capitan update under Software Bits 8.4) and after doing both of those my Parallels 10 performance was respectable...prior to that all Windows VM spinups were major slow and obviously just hammering the first core from Activity Monitor, afterwards all cores jump around randomly.
          </p>
        </li>
        
        <li>
          <p>
            Bootcamp under Parallels, fix "missing operating system" &#8211; first shutdown the Bootcamp guest VM so you can make configuration edits, then "Edit Partitions" and for me, my little recovery partition wasn't selected vs the main Windows OS partition, just had to select it (in addition) and restart.
          </p>
        </li>
        
        <li>
          <p>
            <span class="hl">Updating OSX <=> Nvidia drivers</span> &#8211; <a href="//www.tonymacx86.com/graphics/161256-solving-nvidia-driver-install-problems.html">SEE THIS POST</a> &#8211; the Nvidia "web drivers" are rather obnoxiously hard wired to each specific OSX <em>point release</em> (e.g. just going from 10.12.5 to 10.12.6)... so the first boot right after an upgrade requires special attention because the previously installed driver is no longer compatible... the main thing to be aware of is temporarily adding nv_disable=1 to your boot args via the Clover "options" page, which gets you back into a working low res desktop where you can follow the Nvidia driver automatic update process...
          </p>
          
          <ul>
            <li>
              UPDATE: in more recent version of Clover (4049), I needed to go into the Clover options > Graphics Injector submenu and uncheck the Nvidia Web Drivers entry... nv_disable didn't seem to work anymore
            </li>
          </ul>
        </li>
        
        <li>
          <del>Using MacPro6,1 for your SMBIOS requires a special patch &#8211; see <a href="//www.tonymacx86.com/graphics/161256-solving-nvidia-driver-install-problems.html">Fix#4</a></del></p>
        </li>
        <li>
          <p>
            I've come to understand that iMac14,1 is one of the more forgiving choices... <a href="//www.tonymacx86.com/el-capitan-laptop-support/173616-guide-10-11-usb-changes-solutions.html">Apple is changing the USB game a lot starting with El Capitan</a>... they are restricting USB ports depending your SMBIOS machine... <a href="//www.insanelymac.com/forum/topic/306777-guide-usb-fix-el-capitan-1011/">reportedly iMac14,x does not currently (v10.11.2) receive any restrictions on the USB 2.0 side (EHCI)</a>... i can report at least all my USB2.0 devices operate (Logitech Z305 speaker, Logitech C910 webcam, Logitech Anywhere receiver)
          </p>
        </li>
        
        <li>
          <p>
            starting from a completely bare drive &#8211; just format it as GPT Journaled with a single partition via DiskUtil &#8211; this will create an unavoidable ~200MB EFI partition which is good for clover
          </p>
        </li>
        
        <li>
          <p>
            Yosemite installer or <a href="//musings.silvertooth.us/2014/07/recovery-partition-creator-3-8/">Recovery script</a> will add "Recovery HD" partition &#8211; however, i don't particularly see the need for Recovery mode vs booting into full OSX VM for any troubleshooting
          </p>
        </li>
        
        <li>
          <p>
            on the VM image i had major kernal_task CPU crunches that would storm in and bring everything to a stand still... guessing thru googling that some IO kext is getting hung up... i disabled sleep and this issue no longer occurred, no big surprise.
          </p>
        </li>
        
        <li>
          <p>
            easy success with Migration Assistant restoring from Time Machine backup after booting into a fresh OSX install makes this my preferred approach &#8211; see "Time Machine saving to Windows share" under Misc tweaks below.
          </p>
        </li>
      </ol>
      
      <h4>
        System Integrity Protection (SIP)
      </h4>
      
      <p>
        Under OS X 10.11 El Capitan and beyond, SIP presents a new challenge to hacking kexts<br /> (<a href="//www.reddit.com/r/hackintosh/comments/3frbav/installing_kexts_on_el_capitan_1011/">good ref</a>)
      </p>
      
      <ol>
        <li>
          Under Clover Configurator set the follow RT Variables: <ol>
            <li>
              CsrActiveConfig = 0x03 (for full) &#8211; or 0x01 (for partial)
            </li>
            <li>
              BooterConfig = 0x28
            </li>
          </ol>
        </li>
        
        <li>
          remove the old rootless=0 and kext-dev-mode=1 from boot args
        </li>
        <li>
          Kext Utility 2.6.4 seemed to resolve refusal to load S/L/E kexts after edits were made
        </li>
      </ol>
      
      <h4>
        Install Steps:
      </h4>
      
      <ol>
        <li class="expander">
          Fire up the VMware OS X guest on pre-installedÂ <b>virtual Yosemite image</b>Â (Bits 1 & 2 above) <ol>
            <li>
              Make sure BEFORE launching OS X guest, perform "#3. MBR trick" under "VMware Guest Configs" above
            </li>
            <li>
              if you install the darwin.iso tools the resolution does get a nice little bump from 1024&#215;768 to 1920&#215;1080... and it seems to be slightly more responsive &#8211; find in: C:\Program Files (x86)\VMwareVMware Workstation\darwin.iso
            </li>
            <li>
              Physical drive must be formatted before Yosemite installer will recognize as a valid installation point (specify GPT & Journaled)
            </li>
          </ol>
        </li>
        
        <li class="expander">
          Install <del>Yosemite</del> latest macOS to the physical drive via Apple App Store download <ol>
            <li>
              I counted 3 restarts... first round ended with a few mins stuck on "1 sec remaining", second round was ~20 mins long... 3rd and final looped me back to the beginning of the install, confusing if you're not paying attention... just bail out and reboot back into virtual Yosemite
            </li>
            <li>
              If you wind up fumbling that last stage like i did, then you're the proud owner of a fresh new install WITHOUT ANY WAY TO LOGIN, doh! ... Â <a href="//www.theinstructional.com/guides/how-to-re-run-the-os-x-setup-assistant" target="_blank">this article</a>Â is handy ðŸ™‚
            </li>
            <li>
              since you now have 2 viable boot drives under VMware (the original virtual disc and this new physical), make sure to select the virtual as your default startup disc via the mac "Startup" preferences panel... after some fiddling i got VMware to load my physical for kicks but typically the reason you need to be in VMware is your physical is hosed and you're looking to troubleshoot from your virtual
            </li>
          </ol>
        </li>
        
        <li>
          Use Clover Configurator to download and install latest Clover &#8211; Remember to select the <b>physical drive</b> as the installation point <ul>
            <li>
              I went with the EFI only install with no other checkboxes necessary
            </li>
          </ul>
        </li>
        
        <li class="expander expanded">
          Clover Configurator settings &#8211; these need to get saved to your EFI partition/EFI/Clover/config.plist, so you'll need to mount your EFI partition and make sure to select this file before you start applying settings, and then don't forget to save before quitting. <ol>
            <li>
              Boot tab: <ol>
                <li>
                  -v &#8211; verbose, you're going to want to watch for any clues if it blows up
                </li>
                <li>
                  npci=0x2000 &#8211; everybody says this one is crucial
                </li>
                <li>
                  nvda_drv=1 &#8211;Â (my hardware)Â enables loading Nvidia kexts
                </li>
                <li>
                  (El Capitan no longer honors this flag) <del>kext-dev-mode=1 &#8211; this enables loading of unsigned kexts</del>
                </li>
                <li>
                  slide=0 &#8211; pulled this from a guide (not sure necessary)
                </li>
                <li>
                  (my hardware) Legacy = LegacyBiosDefault &#8211; this enables Windows to boot when it's been installed in MBR (aka Legacy) mode vs <a href="//www.eightforums.com/tutorials/2328-uefi-unified-extensible-firmware-interface-install-windows-8-a.html" target="_blank">UEFI mode</a>
                </li>
              </ol>
            </li>
            
            <li>
              GUI &#8211; hiding entries on the clover boot menu is complicated by all the different combinations... this is the strategy that was the most rational for me <ol>
                <li>
                  Scan = Custom, then select Entries & Tool (leave Legacy and Kernel unchecked) &#8211; i couldn't figure out how to hide my Windows EFI partition from the legacy scan so this disables legacy scanning entirely
                </li>
                <li>
                  Hide Volume => Recovery HD &#8211; this was the only one that still needing specific hiding
                </li>
                <li>
                  Custom Entries <ol>
                    <li>
                      one for the OSX volume <b>by name</b> (not the mac/clover EFI volume), don't forget to set the Type field or it won't save to config.plist, no other fields required, but you might want to set a specific image file (e.g.Â EFICLOVERthemesthinkpadiconsos_yos.icns)
                    </li>
                    <li>
                      one for Windows volume <b>by UUID</b>, always set the Type field, no others required
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
            
            <li>
              Kernel and Kext Patches <ol>
                <li>
                  KernelHaswellE (my hardware)
                </li>
              </ol>
            </li>
            
            <li>
              Install Drivers &#8211; for Yosemite everything will be 64bit and I'm doing UEFI only so we'll be selecting only from the two bottom sections on the Install Drivers tab (i.e. "Drivers UEFI 64 bit" and "Extra Drivers") <ol>
                <li>
                  remove VBoxHfs
                </li>
                <li>
                  add HFSPlus UEFI
                </li>
                <li>
                  &#8212;- my hardware &#8212; otherwise Clover will hang trying to allocate contiguous memory right after OS selection
                </li>
                <li>
                  add OsxAptioFixDrv
                </li>
                <li>
                  add OsxLowMemFixDrv
                </li>
                <li>
                  add OsxFatBinaryDrv UEFI
                </li>
              </ol>
            </li>
            
            <li>
              Theme &#8211; my chosen them never seemed to save to the config.plist for me so i just found the <theme> section and put the one i wanted manually (textedit works fine here).
            </li>
          </ol>
        </li>
        
        <li>
          Copy kexts to EFI\EFI\CLOVER\Kexts\10.10 <ol>
            <li>
              FakeSMC
            </li>
            <li>
              VoodooTSCSync (my hardware)
            </li>
            <li>
              <del>GenericUSBXHCI (my hardware)</del> &#8211; no longer recommended, see El Capitan update under Software Bits 8.4
            </li>
            <li>
              AppleIntelE1000eÂ (my hardware)
            </li>
          </ol>
        </li>
        
        <li>
          You should now be able to reboot into this new physical OS X &#8211; <b style="text-decoration: underline;">*** I've needed to include "nv_disable=1" in the boot args until i've gotten the Nvidia WebDrivers loaded ***</b>; <a href="//www.tonymacx86.com/graphics/161256-solving-nvidia-driver-install-problems.html" target="_blank">THIS POST</a> is very helpful for all the different issues
        </li>
        <li>
          Play it safe, do a <b><u>Time Machine backup</u></b> of this pristine install before you do anything else to screw it up (see "Time Machine saving to Windows share" below) &#8211; *** especially before the Nvidia drivers ***, i've had them black screen me... if that happens, try nv_disable=1 boot arg first before starting completely over.
        </li>
        <li>
          Last juicy step is to go ahead and install <a href="//www.macvidcards.com/which-driver-should-i-install-for-my-new-gpu.html" target="_blank">latest full Nvidia web drivers</a>Â (Tip: confirm your specific OS X version via Finder > About This Mac > and holdÂ âŒ˜ when you click the version number)
        </li>
      </ol>
      
      <h4>
        Misc tweaks and tools:
      </h4>
      
      <ul>
        <li>
          <a href="//www.jwgoerlich.us/blogengine/post/2009/11/05/Use-Diskpart-to-Create-and-Format-Partitions.aspx" target="_blank">DiskPart cheat sheet</a>
        </li>
        <li>
          <a href="//www.trankynam.com/xtrafinder/" target="_blank">XtraFinder</a> &#8211; dual panes!, tabs, F2=rename, Enter=launch file, Delete=delete file
        </li>
        <li>
          <a href="//cvad-mac.narod.ru/index/0-4" target="_blank">Kext Utility</a>
        </li>
        <li>
          <a href="//sourceforge.net/projects/cloverutilities/" target="_blank">Clover Preference Pane</a>
        </li>
        <li>
          <a href="//www.beejblog.com/2015/08/WindowsUEFI.html" target="_blank">Installing Windows in UEFI Mode</a> &#8211; this makes it more straightforward to target the drive for booting from Clover... it's also supposed to be the fastest way to boot up
        </li>
        <li>
          Fix Home/End keys: <a href="//pqrs.org/osx/karabiner/" target="_blank">Karabiner</a> > "PC style" keys options
        </li>
        <li class="expander">
          Show All Drives in DiskUtility: <pre class="expandee">defaults write com.apple.DiskUtility DUDebugMenuEnabled 1</pre>
        </li>
        
        <li class="expander">
          Resolve Microsoft Remote Desktop self signed cert lockup (<a href="//social.technet.microsoft.com/Forums/windowsserver/en-US/5612bf49-66b2-45f7-978f-00a35fec6ea1/mac-client-os-hangs-when-ms-client-attempts-to-trust-the-certificate?forum=winRDc" target="_blank">ref#1</a>, <a href="//discussions.apple.com/thread/6300609" target="_blank">ref#2</a>) <ol>
            <li>
              Use <b><i>Activity Monitor</i></b> > View > All Processes to <b><i>kill SecurityAgent</i></b> which will dump the hung authorization popup
            </li>
            <li>
              Open <b><i>Keychain Access</i></b> app in OSX
            </li>
            <li>
              Select <b><i>Certificates</i></b> under the category heading &#8211; trusted certs are marked with a white plus in blue circle
            </li>
            <li>
              double click your untrusted certificate
            </li>
            <li>
              expandÂ <b><i>Trust</i></b> section
            </li>
            <li>
              selectÂ <b><i>Always Trust for SSL</i></b>
            </li>
            <li>
              close, done
            </li>
          </ol>
        </li>
        
        <li class="expander">
          Enable <a href="//forums.macrumors.com/threads/selecting-location-of-timemachine-backups.1544990/#post-16867938" target="_blank">Time Machine saving to Windows share</a> (smb) <ol>
            <li>
              Save a "sparsebundle" image to your share via DiskUtil > new image... 500GB or whatever... it's "sparse" so it won't use all the space right away... go with "Single Partition &#8211; GUID" and Journaled
            </li>
            <li>
              "Mount" your share via Finder âŒ˜-k, confirm by Finder > prefs > SideBar > Devices > {your machine}... Â look for share as a drive icon there
            </li>
            <li>
              Double click the sparsebundle to get that mounted as well
            </li>
            <li>
              Terminal: sudo tmutil setdestination /Volumes/{sparsebundle drive}
            </li>
            <li>
              Fire up Time Machine prefpane and select that drive, yay!
            </li>
            <li>
              Use Users prefpane > Login Items to make the two mounts automatic after reboots so that Time Machine has continuous access to do its background backup magic
            </li>
            <li>
              CONFIRM THAT YOU CAN <a href="//apple.stackexchange.com/questions/162544/how-to-restore-system-from-network-drive" target="_blank">RECOVERY RESTORE</a> from this rather unsanctioned source &#8211; traditionally one does this from a "Recovery HD" partition with the special Time Machine Restore tool available to that environment but i ran into enough snags that my preferred approach is to reinstall OSX from scratch from the OSX virtual machine, then boot back into the fresh install and use Migration Assistant to restore from the Time Machine backup. This is aÂ resilient solution because if we somehow trash this guest VM, we can readily recreate it from the source vmdk file. <ol>
                <li>
                  If you're still interested, here's notes on creating a <a href="//www.tonymacx86.com/alternate-bootloaders/143437-guide-make-bootable-recovery-hd-partition-clover.html" target="_blank">bootable Clover recovery partition</a>Â &#8211; i had a lot of trouble modifying the BaseSystem.dmg toÂ include my NIC's kext such that i could point the Time Machine tool at my backup volume over the network
                </li>
                <li class="expander">
                  (unsuccessful) Time Machine restore over NFS from Recovery mode <ul>
                    <li>
                      SMB is not supported in the limited Recovery environment so NFS is the next obvious choice to restore from a network source
                    </li>
                    <li>
                      <a href="//www.labf.com/nfsaxe/" target="_blank">NFSAxe</a>Â was the one Windows NFS server that did at least support the basic OSX client to Windows mount (after trying bothÂ <a href="//sourceforge.net/projects/freenfs/" target="_blank">FreeNFS</a>Â andÂ <a href="//www.hanewin.net/nfs-e.htm" target="_blank">haneWin NFS</a>)
                    </li>
                    <li>
                      <a href="//smekkley.wordpress.com/2014/01/18/time-machine-via-nfs-on-mavericks/" target="_blank">Time Machine via NFS on Mavericks</a>Â and <a href="//www.cyberciti.biz/faq/apple-mac-osx-nfs-mount-command-tutorial/" target="_blank">Mac NFS client tutorial</a> &#8211; details pertinent Terminal commands... but ultimately ran aground with "sparsebundle not compatible" error which seemed like a limitation of the mount util (hdiutil) or the underlying filesystem libraries not available under recovery mode <ul>
                        <li>
                          make root drive writeable: mount -uw /
                        </li>
                        <li>
                          create mount point: mkdir /private/MacBackups
                        </li>
                        <li>
                          mount -t nfs beejquad:/m/macbackups /private/MacBackups
                        </li>
                      </ul>
                    </li>
                    
                    <li>
                      If curious to try, the Recovery mode tools can be fired up under standard OSX <ul>
                        <li>
                          mount any "Recovery HD" partition you can get your hands on
                        </li>
                        <li>
                          then under com.apple.recovery.boot, find BaseSystem.dmg and mount that (it is hidden)
                        </li>
                        <li>
                          Then the special Time Machine full restore app is under: /System/Installation/CDIS/Time Machine System Restore.app/Contents/MacOS/Time Machine System Restore ... but again, this didn't pan out for me since i wasn't able to mount my sparsebundle image that contained the Time Machine backups... it seemed to be a Recovery mode limitation because the sparsebundle file continues to mount fine under standard OSX boot
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ol>
            </li>
          </ol>
        </li>
        
        <li class="expander">
          Mounting EFI partition under windows <ol>
            <li>
              launch cmd.exe, then:
            </li>
            <li>
              diskpart
            </li>
            <li>
              list disk (looking for the right drive)
            </li>
            <li>
              select disk x (where x is drive number)
            </li>
            <li>
              list part
            </li>
            <li>
              select part 1 (EFI will be first on a normally formatted GUID drive)
            </li>
            <li>
              assign letter=e
            </li>
            <li>
              (when done) remove letter=e
            </li>
            <li>
              Then need to launch explorer.exe as admin to access this E: drive <ol>
                <li>
                  cmd.exe as admin
                </li>
                <li>
                  taskkill /im explorer.exe /f
                </li>
                <li>
                  explorer
                </li>
              </ol>
            </li>
          </ol>
        </li>
      </ul>
      
      <div class="expander">
        <h4 style="display: inline;">
          MBR Trick:
        </h4>
        
        <div class="expandee">
          <div class="separator" style="clear: both; text-align: center;">
            <a style="margin-left: 1em; margin-right: 1em;" href="//www.BeejBlog.com/wp-content/uploads/2015/04/Untitled.png"><img src="//www.BeejBlog.com/wp-content/uploads/2015/04/Untitled.png" alt="" width="436" height="640" border="0" /></a>
          </div>
          
          <div class="separator" style="clear: both; text-align: center;">
            <a style="margin-left: 1em; margin-right: 1em;" href="//www.BeejBlog.com/wp-content/uploads/2015/04/Snap1.png"><img src="//www.BeejBlog.com/wp-content/uploads/2015/04/Snap1.png" alt="" border="0" /></a>
          </div>
        </div>
      </div>

 [1]: https://user-images.githubusercontent.com/6301228/27511287-5b6a73f0-58d5-11e7-82fa-05d992b82e60.png
 [2]: //communities.vmware.com/docs/DOC-10455
 [3]: #MBRTrick